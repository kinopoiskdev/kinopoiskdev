# Синтаксис запросов к первой версии API kinopoiskdev

## Синтаксис
```
https://api.kinopoisk.dev/movie?field=genres.name&search=боевик&page=1&limit=15&isStrict=false&sortField=votes.kp&sortField=premiere.world&sortType=-1&sortType=-1&token=TOKEN
```

Вся основная информация в старой [документации](https://kinopoiskdev.docs.apiary.io/).
А если коротко, то запросы к апи строились по следующему принципу:
1. передавался параметр `field` - поле, по которому нужно искать  
1.1. значение `field` - это название поля в модели базы данных, но в плоском в виде строки
1.2. например если требуется найти по id imdb, то `field` будет `externalId.imdb`, и т.д.
2. в пару к этому значению предавался парамер `search` - значение, по которому нужно искать
3. page - номер страницы
4. limit - количество элементов на странице
5. isStrict - строгий поиск или нет
6. sortField - поле, по которому нужно сортировать. Принимает аналогичное значение, как и `field`
7. sortType - тип сортировки. 1 - по возрастанию, -1 - по убыванию
8. sortField и sortType могут быть переданы несколько раз, тогда сортировка будет происходить по нескольким полям
9. token - личный токен пользователя

Далее такой запрос парсился, и на основе заранее определенных полей и их типов мержился в объект запроса валидный для mongoose, и уже по нему идет поиск в базе данных.

